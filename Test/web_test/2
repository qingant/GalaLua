<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>webframework 测试结果</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="stylesheet.css" rel="stylesheet"  type="text/css">
<script src="js/esl.js"></script>
<script src="js/jquery.js"></script>
</head>
<body>
    <div ID="header">
    <h1 id="h1size">
    DEMONSTRATION
    </h1>
    <div id="menu">
        <p style="text-align:center;font-size:22px;margin-top:5px;font-family:Times; ">Frequent</p>
    </div>
    <select  id="choose">
        <option value="1000">60f/min</option>
        <option value="2000">30f/min</option>
        <option value="5000">12f/min</option>
    </select>
    <br/>
    </div>
<div id="chartAreaBar" class="backGround"></div>
<div id="chartAreaBar1" class="backGround"></div>
<div id="chartAreaGraph" class="backGround"></div>
<script>

var Complete_Statistic  = [1000, 1000,100,10,50,40]; // 完成情况统计数据
var barData1= [ 3, 7, 10, 13, 15, 18, 21, 24, 27, 34];//第一表的数据
var lineDataAve1= [12,12,12,12,12,12,12,12,12,12];//平均值1
var barData2= [25,32,41,29,17,23,36,37,40,28,25,34,42,32,35,34,39,31,37,29,33,32,31,36,33,35,29,16,9];//第二个表的数据
var lineDataAve2= [31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25,31.25];//平均值2
var freq=1000;

require.config({
        paths:{
            echarts:'./js/echarts',
            'echarts/chart/bar' : './js/echarts',
            'echarts/chart/line': './js/echarts'
        }
    });

var optionLine = {
    tooltip : {
        trigger: 'axis'
    },
    legend: {
        data:['']
    },
    toolbox: {
        show : true,
        feature : {
            mark : true,
            dataView : {readOnly: false},
            magicType:['line', 'bar'],
            restore : true,
            saveAsImage : true
        }
    },
    calculable : true,
    xAxis : [
        {
            type : 'category',
            name : 'Seconds',
            data :
            [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,23,24,25,26,27,28,29,30,31,32]//第二个图横坐标输入
        }
    ],
    yAxis : [
        {
            type : 'value',
            name : 'TPS',
            splitArea : {show : true}
        }
    ],
    series : [{
        name:'Top Commands',
        type:'bar',
        data:barData2,
        itemStyle:{
            normal:{color:'#008ec1'},
            type:'default'
        }
    },
    {
        name:'average',
        type:'line',
        data:lineDataAve2,
        itemStyle:{
            normal:{color:'orange'},
            type:'default'
        }

    }
    ]
};

//var optionGraph = {
//                title : {
//                 text: 'Commands Processed'
//                },
//                tooltip : {
//                    trigger: 'axis'
//                },
//                legend: {
//                    data:['Commands Processed']
//                },
//                toolbox: {
//                    show : true,
//                    feature : {
//                        mark : true,
//                        dataView : {readOnly: false},
//                        magicType:['line', 'bar'],
//                        restore : true,
//                        saveAsImage : true
//                    }
//                },
//                calculable : true,
//                xAxis : [
//                    {
//                        type : 'category',
//                        boundaryGap:false,
//                        data : barData
//                    }
//                ],
//                yAxis : [
//                    {
//                        type : 'value',
//                        splitArea : {show : true}
//                    }
//                ],
//                series : [{
//                        name:'Commands Processed',
//                        type:'bar',
//                        data:barData,
//                        itemStyle:{
//                        normal:{
//                            color:'#00c3d1',
//                            areaStyle: {
//                            shadowColor : '#0093c1',
//                            type: 'default'
//                        }
//                        }
//                        }
//                    }
//                ]
//            };

var CompleteTotalBar = {
    tooltip : {
        trigger: 'axis'
    },
    tooltip : {
        trigger: 'ayis'
    },
    legend: {
        data:["总请求1000"],
    },
    toolbox: {
        show : true,
        feature : {
            mark : true,
            dataView : {readOnly: false},
            magicType:['line', 'bar'],
            restore : true,
            saveAsImage : true
        }
    },
    calculable : true,
    xAxis : [

        {
            type : 'category',
            name : '类别',
            data : ['实际请求','总错误','Recv TimeOut','RecvLine TimeOut','Send TimeOut']
        }
    ],
    yAxis : [
        {
            type : 'value',
            name : '比例',
            splitArea : {show : true}
        }
    ],
    series : [{
            name:'Top Commands',
            type:'bar',
            data: Complete_Statistic,
            itemStyle:{
            normal:{color:'#008ec1'},
            type:'default'
            }
        },
    ]
};

var CompleteProcessBar = {
    tooltip : {
        trigger: 'axis'
    },
    tooltip : {
        trigger: 'ayis'
    },
    legend: {
        data:[''],
    },
    toolbox: {
        show : true,
        feature : {
            mark : true,
            dataView : {readOnly: false},
            magicType:['line', 'bar'],
            restore : true,
            saveAsImage : true
        }
    },
    calculable : true,
    xAxis : [

        {
            type : 'category',
            name : '完成度',
            data : ['10%','20%','30%','40%','50%','60%','70%','80%','90%','100%']
        }
    ],
    yAxis : [
        {
            type : 'value',
            name : 'Seconds',
            splitArea : {show : true}
        }
    ],
    series : [{
            name:'Top Commands',
            type:'bar',
            data:barData1,
            itemStyle:{
            normal:{color:'#008ec1'},
            type:'default'
            }
        },
    ]
    };


var lineChart,graphChart;

require(
    [
        'echarts',
        'echarts/chart/bar',
        'echarts/chart/line'
    ],
    function(ec) {
        graphChart= ec.init(document.getElementById('chartAreaBar'));
        graphChart.setOption(CompleteTotalBar);
        lineChart= ec.init(document.getElementById('chartAreaBar1'));
        lineChart.setOption(CompleteProcessBar);
        graphChart= ec.init(document.getElementById('chartAreaGraph'));
        graphChart.setOption(optionLine);
        var timeTicket;
        clearInterval(timeTicket);
        timeTicket= setInterval(GetData, freq);
    }
);

function GetData(){
    GetlineData();
    GetgraphData();
    GetbarData();
    GetInData();
}
//
//   function GetlineData(){
//    $.ajax({
//        url:'/line',
//         datatype:'json',
//        success:function(res){
//          var num =  res.data;
//            lineChart.addData([
//                [
//                    0,        // 系列索引
//                    num,// 新增数据
//                    true,     // 新增数据是否从队列头部插入
//                    false     // 是否增加队列长度，false则自定删除原有数据，队头插入删队尾，队尾插入删队头
//                ]
//            ]);
//        }
//        });
//   }
//
//    function GetgraphData(){
//    $.ajax({
//        url:'/graph',
//         datatype:'json',
//        success:function(res){
//          var num =  res.data;
//            graphChart.addData([
//                [
//                    0,        // 系列索引
//                    num,// 新增数据
//                    true,     // 新增数据是否从队列头部插入
//                    false     // 是否增加队列长度，false则自定删除原有数据，队头插入删队尾，队尾插入删队头
//                ]
//            ]);
//        }
//        });
//   }
//
//    function GetbarData(){
//    $.ajax({
//        url:'/bar',
//         datatype:'json',
//        success:function(res){
//          var num =  res.data;
//            barChart.addData([
//                [
//                    0,        // 系列索引
//                    num,// 新增数据
//                    true,     // 新增数据是否从队列头部插入
//                    false     // 是否增加队列长度，false则自定删除原有数据，队头插入删队尾，队尾插入删队头
//                ]
//            ]);
//        }
//        });
//   }
//
//   function GetInData() {
//    $.ajax({
//        url:'/indicator',
//        datatype:'json',
//        success:function(res){
//            document.getElementById("umem").innerHTML=res.used_memory+"K";
//            document.getElementById("tkey").innerHTML=res.total_keys+"K";
//            document.getElementById("clients").innerHTML=res.client_count;
//            document.getElementById("cmdproc").innerHTML=res.cmd_processed+"K";
//            document.getElementById("uptime").innerHTML=res.uptime+"S";
//        }
//    })
//   }

</script>
</body>
</html>
